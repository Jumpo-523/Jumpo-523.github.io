---
title: regexに慣れよう。（加筆予定）
date: "2020-12-12T14:46:37.121Z"
---

基本的な構造は知っているけど、、結局言語によってばらつきあるみたいだし、一度体系を学んだ方がいいなぁと思いつつ、出てきたら調べるを繰り返してしまいがちな正規表現...

まぁ本腰入れて勉強するまではないとは思います。せめて遭遇したパターンだけでも覚えてすぐ引けるようにしておきたい。

そんな思いからこの記事を書いています。そしておそらく書ききることはないので、随時更新を予定しています。


### ```"[\w\-._]+@[\w\-._]+\.[A-Za-z]+"```
???

### ```"^(?=.*?[a-zA-Z])(?=.*?\d)(?=.*?[!-/:-@[-`{-~])[!-~]{4,100}$"```




### HTML文からテキストデータを抽出する正規表現

- Big Queryの勉強していたら見かけた。
    - https://ymym3412.hatenablog.com/entry/2020/12/24/001923

```
select
  regexp_replace(strings, '<(".*?"|\'.*?\'|[^\'"])*?>', '') as clearned
from
  texts
```

`<(".*?"|\'.*?\'|[^\'"])*?>`

- `A|B`はパターンのOR結合を表す。
- `()`で囲んで１パターンとして見做す
- .*?は最左最短マッチと呼ばれている
    - `<<<hoge>>>`に対して<.*?>をパターンマッチさせる際に行われる実際の処理の流れがとてもわかりやすかった。
    ```
    <         # <までマッチ
    <<        # <>のマッチに失敗、.の数を増やしてリトライ
    <<        # <.までマッチ
    <<<       # <.>のマッチに失敗、.の数を増やしてリトライ
    <<<       # <..までマッチ
    <<<h      # <..>のマッチに失敗、.の数を増やしてリトライ
    <<<h      # <...までマッチ
    <<<ho     # <...>のマッチに失敗、.の数を増やしてリトライ
    <<<ho     # <....までマッチ
    <<<hog    # <....>のマッチに失敗、.の数を増やしてリトライ
    <<<hog    # <.....までマッチ
    <<<hoge   # <.....>のマッチに失敗、.の数を増やしてリトライ
    <<<hoge   # <......までマッチ
    <<<hoge>  # <......>までマッチ
    ```
    参考文献([link](https://qiita.com/anqooqie/items/191ad215e93237c77811))
    
    - 要するに、 `<`を見つけたら、最初の`>`を見つけるまでマッチし続けてくれると言うことになりますね。

また、https://qiita.com/honeydaisuki/items/d2a38cef1b95fd347fa4 の記事のコメントに詳細が解説されていました。m__m
```
「.」は「任意の1文字」に
「*」は「直前のパターンの0回以上の最長連続」に
「*?」は「直前のパターンの0回以上の最短連続」にマッチします。
```

### つまり...?

<>で覆われた、文字列, 及び、任意の文字(\'：シングルクオーテーションを除く)に対してマッチして、空文字と置き換えますよ。と言うこと。
